subject:
  _props:
    - id
  _flattend_props:
    - path: virus_infections
      _props:
        - virus_type
    - path: demographics
      _props:
        - virus_type
        - gender
        - race
        - ethnicity
        - vita_status
        - year_of_birth
  _aggregated_props:
    - name: _follow_ups_count
      leaf: follow_up
      path: subjects
      fn: count
    - name: _summary_drug_uses_count
      leaf: summary_drug_use
      path: subjects.follow_ups
      fn: count
    - name: _summary_lab_results_on_follow_up_count
      leaf: summary_lab_result
      path: subjects.follow_ups
      fn: count
    - name: _samples_count
      leaf: sample
      path: subjects
      fn: count
    - name: _aliquots_count
      leaf: aliquot
      path: subjects.samples
      fn: count
    - name: _summary_lab_results_on_sample_count
      leaf: summary_lab_result
      path: subjects.samples
      fn: count
    - name: _mRNA_microarrays_count
      leaf: mRNA_microarray
      path: subjects.samples.aliquots
      fn: count
    - name: _miRNA_microarrays_count
      leaf: miRNA_microarray
      path: subjects.samples.aliquots
      fn: count
    - name: _lipid_mass_spectrometries_count
      leaf: lipid_mass_spectrometry
      path: subjects.samples.aliquots
      fn: count
    - name: _protein_mass_spectrometries_count
      leaf: protein_mass_spectrometry
      path: subjects.samples.aliquots
      fn: count
    - name: _metabolite_mass_spectrometries_count
      leaf: metabolite_mass_spectrometry
      path: subjects.samples.aliquots
      fn: count
#      target_field: field_name
